
### 软硬连接
##### 1.==软连接 ln -s 蓝色的==
类似于**快捷方式**，本质是一个特殊类型的文件，**它的内容是指向另一个文件的路径**，当访问软连接的时候，操作系统会根据链接文件的路径访问实际的文件数据，**可以跨分区**
⭕️ **软链接有一个独立的inode，说明创建软链接即创建了一个新的文件。这个文件保存被链接文件的路径**
 - **特点**：
	- **独立文件**：软连接是一个独立的文件，即使目标文件被删除，软连接仍存在，但它指向的位置已经无效了
	- **可以跨文件系统**：因为存储的是不同文件的路径，可以跨文件系统
	- **自己有权限和属性**：软连接文件有自己的属性，跟目标文件无关
**ln -s <目标文件> <软连接名称>**
目标文件的路径 和你希望的软连接路径 ！！==这个软连接名字打错了用mv改了一下==
![[Pasted image 20240822201924.png]]
##### 2.==硬链接 ln 白色的==
指**多个文件指向同一个文件数据块**，硬链接和原文件本质上是**同一个文件**，只有一个文件数据块被多个文件名引用。当你修改其中任何一个文件名，文件的内容都会被修改。
⭕️**硬链接没有独立的inode，说明创建硬链接时没有创建新文件。硬链接的本质就是新增一个文件名和inode映射关系**
- **特点**：
	- **统一数据**：硬链接文件和原文件共同享有相同的数据块，它们就是同一个文件的不同名字，删除任何一个名字，只要还有一个硬链接，数据仍然存在
	- **不能跨文件系统**：硬链接只能在同一个文件系统内创建，不能跨文件系统，因为指向一个块
	- **文件属性**:硬连接的权限和属性一模一样，本质是一个文件
**ln <目标文件> <硬连接名称>**
![[Pasted image 20240822204211.png]]
[[绝对路径和相对路径]]
#### 磁盘的基本结构
磁盘是一个外设，访问速度对于CPU慢
一个盘面里面有很多的同心圆，这些圆圈就是磁道，**磁盘寻址的基本单位是扇区-512字节**，所以磁盘又被称为块设备文件，每一个磁道的周长不一样，但是数据量是一样
![[Pasted image 20240826202828.png|400]]

磁盘的基本逻辑结构
把扇区抽象成线性结构，只要知道扇区的下标，就可以看成是定位一个扇区，逻辑块地址(LBA地址)
[[4.文件IO]]

---
### 操作系统之中的文件系统
每次IO的时候，一次性多读取几个扇区，**主流一般都是读取 8 个扇区（4KB）**，所以在操作系统之中，**操作系统以 4KB 为单位管理内存，叫页框**，**磁盘文件以4KB为基本单位分块，称为页帧**，OS在读取磁盘数据时，一次性读取4KB，一个页帧耦合一个页框
#### 文件系统如何对磁盘进行管理
文件系统将磁盘分区，分组管理
![[Pasted image 20240826204645.png|500]]
文件系统对每个分组进行管理。然后将每个分组的管理模式拷贝给其他分组，这样就形成了对分区的管理。最后将每个分区的管理模式拷贝给其他分区，这样就形成对整个磁盘的管理
![[Pasted image 20240826204735.png|500]]
#### inode
-  **inode是文件的元数据**：它包含了文件的所有属性和数据指针。
- **硬链接是 `inode` 的别名**：它们通过多个文件名指向同一个 `inode`，共享同一份数据和元数据。
- **硬链接计数**：决定了文件数据是否从磁盘中删除，只有所有硬链接都被删除后，`inode` 才会被释放。
查看文件的 `inode` 号，可以使用 `ls -i` 命令。这个命令会列出文件的 `inode` 号和文件名,可以把两个文件的 inode 号显示出来
![[Pasted image 20240822211429.png|550]]
#### block - 文件读取的最小单位-由8个扇区组成 
**1.块的作用**
	- **存储数据单元**：文件系统将数据划分为若干个块，然后将这些块存储在磁盘上。一个文件可能占用多个块，也可能共享块
	- **提高访问效率**：通过将数据分成块，文件系统可以更高效地进行数据读取和写入操作，因为每次操作都是按块进行的
2.**块大小**
	- **小块**：适合存储大量小文件，可以减少浪费，但会增加文件系统管理的开销
	- **大块**：适合存储大文件，减少了文件碎片化的风险，但会导致空间浪费，尤其是在存储很多小文件时
3.**块和inode的关系**
	- `inode` 负责存储文件的元数据，而文件的实际数据是存储在磁盘的块中的。`inode` 中包含指向这些块的指针。每个文件的 `inode` 包含了文件的属性信息以及指向实际数据块的指针
**总结**：
	- **块（block）** 是文件系统用于管理和存储文件数据的基本单位。
	- **块大小** 会影响文件系统的存储效率和性能。
	- **`inode` 和块**：`inode` 管理文件的元数据，而块存储文件的实际数据
##### ==stat== 或 ==ls -li== 命令--==查看详细文件信息== 
IO块：文件系统的块大小
![[Pasted image 20240822105623.png]]

